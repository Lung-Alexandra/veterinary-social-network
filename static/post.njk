<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Post</title>
</head>
<body>

{% if method %}
<h1>Modify Post</h1>
<form action="/post/{{post.id}}" method="POST">
    <input type="hidden" name="_method" value="PUT">
    {% else %}
    <h1>Create a New Post</h1>
    <form action="/post" method="POST">
        {% endif %}
        <input type="text" id="title" name="title" value="{{ post.title if post else '' }}"><br>
        <label for="tags">Tags:</label>
        <input type="text" id="tags" name="tags" placeholder="Enter tags separated by comma"
               value="{% if post.tags.length %}{% for tag in post.tags %}{{ tag.name }}{{ ',' if not loop.last }}{% endfor %}{% endif %}"><br>
        <label for="content">Content:</label><br>
        <textarea id="content" name="content">{{ post.content if post else '' }}</textarea><br>
        <label for="type">Type:</label><br>
        <select id="type" name="type">
            <option value="TEXT">Text</option>
            <option value="TEXTIMAGE">Text + Image</option>
        </select><br>
        {% if method and post.type == "TEXTIMAGE" %}
        <label for="image">Image:</label><br>
        <input type="file" id="image" name="image"><br>
        {% else %}
        <div id="imageField" style="display: none;">
            <label for="image">Image:</label><br>
            <input type="file" id="image" name="image"><br>
        </div>
        {% endif %}
        <button type="submit">{{ "Modify Post" if method else "Create Post" }}</button>
    </form>
    <button type="submit"><a href="/">Back</a></button>


    <script>
        const typeSelect = document.getElementById('type');
        const imageField = document.getElementById('imageField');

        typeSelect.addEventListener('change', () => {
            if (typeSelect.value === 'TEXTIMAGE') {
                imageField.style.display = 'block';
            } else {
                imageField.style.display = 'none';
            }
        });
    </script>
</body>